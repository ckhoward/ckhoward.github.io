<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="Chris Howard Portfolio">

<base href="https://ckhoward.github.io/">
<title>


     Chris Howard - A Less Confusing Tutorial on Jupyter (IPython) Widgets 

</title>
<link rel="canonical" href="https://ckhoward.github.io/blog/a-less-confusing-tutorial-on-jupyter-ipython-widgets/">


<script type="text/javascript">
    var baseURL = 'https:\/\/ckhoward.github.io\/';
    var host = baseURL.substring(0, baseURL.length - 1).replace(/\//g, '');
    if ((host === window.location.host) && (window.location.protocol !== 'https:')) {
        window.location.protocol = 'https:';
    }
</script>




  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">


<link rel="stylesheet" href="https://ckhoward.github.io/css/reset.css">
<link rel="stylesheet" href="https://ckhoward.github.io/css/pygments.css">
<link rel="stylesheet" href="https://ckhoward.github.io/css/main.css">




<link rel="shortcut icon"

    href="https://ckhoward.github.io/img/datcactus.png"

>






</head>


<body lang="en">



</section>
<section class="header"> 

    <div class="container">
        <a href="https://ckhoward.github.io/"><img class="logo" src="https://ckhoward.github.io/img/datcactus.png" /></a>
        <div class="content">
            <a href="https://ckhoward.github.io/"><div class="name"><h1>Chris Howard</h1></div></a>
            <nav>
                <ul>
                    <a href="https://ckhoward.github.io/"><li>Blog</li></a>
                    <a href="https://ckhoward.github.io/about/"><li>About</li></a>
                    <a href="https://ckhoward.github.io/projects/"><li>Projects</li></a>
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
            <a href="https://github.com/ckhoward" target="_blank">
                <i class="icon ion-social-github"></i>
            </a>
        
        
        
            <a href="https://twitter.com/_ckhoward" target="_blank">
                <i class="icon ion-social-twitter"></i>
            </a>
        

        
            <a href="https://www.linkedin.com/in/-ckhoward/" target="_blank">
                <i class="icon ion-social-linkedin"></i>
            </a>
        

        
            <a href="mailto:ck_howard@yahoo.com">
                <i class="icon ion-ios-email larger"></i>
            </a>
        

        
            <a href="https://ckhoward.github.io/index.xml">
                <i class="icon ion-social-rss larger"></i>
            </a>
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    A Less Confusing Tutorial on Jupyter (IPython) Widgets

</div>

                    <div class="initials"><a href="https://ckhoward.github.io/"></a></div>
                </div>
                <div class="meta">
                    <div class="date" title="Wed Jan 3 2018 00:00:00 UTC">Jan 3, 2018</div>
                    <div class="reading-time"><div class="middot"></div>4 minutes read</div>
                </div>
            </div>
            <div class="markdown">
                

<h1 id="a-less-confusing-tutorial-on-jupyter-ipython-widgets">A Less Confusing Tutorial on Jupyter (IPython) Widgets</h1>

<p>Jupyter widgets are an awesome tool for creating interactive dashboards, but documentation can be a little excessive if you&rsquo;re just looking for basic functionality. It really doesn&rsquo;t have to be so complicated.</p>

<h2 id="our-widget-use-case">Our widget use-case</h2>

<p>My data visualization team wanted to provide researchers with a GUI for visualizing species distributions, and we wanted to give them the power and flexibility to specify different parameters. These parameters included species of interest, the predictive algorithm of interest, predictive power (or threshold), and the speed at which the movements of the species over the course of a year were animated.</p>

<h2 id="the-simplicity-of-widget-code">The simplicity of widget code</h2>

<p>Creating the GUI elements for these varying parameters is as simple as importing the required libraries, creating a variable, assigning a widget to that variable, and then displaying that variable.</p>

<pre><code># Import requirements
import ipywidgets as wg
from IPython.display import display

# Set initial style of the interactive GUI.
style = {'description_width': 'initial'}

# Initialize the elements of the GUI.
name = wg.Text(value='Name', description=&quot;Species: &quot;, style=style)
algo = wg.Dropdown(options = [&quot;CTA&quot;, &quot;GLM&quot;, &quot;RF&quot;],
 description=&quot;Algorithm: &quot;, style=style)
threshold = wg.Dropdown(options = ['1', '10', '50'],
 description=&quot;Prediction Threshold: &quot;, style=style)
month = wg.SelectionSlider(description=&quot;Month: &quot;, options=['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec', 'all'], style=style)
speed = wg.FloatSlider(value=.5,min=0,max=1.0,step=0.1,description='Animation Speed:',style=style)

# Display the GUI.
display(name, algo, threshold, month, speed)
</code></pre>

<p>Note, variables like <code>speed</code> might not make a great deal of sense right now, but just focus on the functions&rsquo; arguments. Speed&rsquo;s default value is set to .5, and has a range of [0, 1] and steps at 0.1. The <code>description</code> argument is the widget&rsquo;s label that the user sees.</p>

<p><img src="img/widget.jpg" alt="Widget" title="IPython GUI Widget" /></p>

<p>Just like that, the <code>display</code> statement takes all of those widget variables and shows them off in the Jupyter Notebook. Now the researchers have more power in choosing what to visualize and how to visualize it.</p>

<h2 id="widget-intuition">Widget intuition</h2>

<p>So, how do you use it? In my experience, users are inclined to change the values around as appropriate, and then execute that cell containing the GUI. Widgets do not operate like this. The variables are active and responsive; the variable holds whatever value is set in the GUI (like CTA for Algorithm), and does not require cell execution. Cell execution resets the GUI and the variable values.</p>

<p><img src="img/widget2.jpg" alt="Widget 2" title="IPython GUI Widget Inputs" /></p>

<p>In changing the GUI around in this way, the variable <code>name</code> now has a value of &lsquo;Papilio_glaucus;&rsquo; <code>algo</code> has &lsquo;CTA;&rsquo; <code>threshold</code> has &lsquo;10&rsquo; and so forth. These variables can now be used in other code.</p>

<pre><code># Import requirements
import os
import matplotlib.pyplot as plt
from PIL import Image as im

# Initialize the filename for each SDM.
filename = &quot;./SDMs/&quot; + name.value + &quot;/&quot; + month.value + &quot;/&quot; + algo.value + &quot;-&quot; + threshold.value + &quot;.png&quot;

# Check for file existence and then display the map (with a title).
if os.path.isfile(filename):
    print('----------------------------------------')
    print('Species: ', name.value)
    print('Algorithm: ', algo.value)
    print('Prediction Threshold: ', threshold.value)
    print('Month: ', str(month.value))
    print('----------------------------------------')
    img = im.open(filename)
    fig = plt.figure()
    fig.set_size_inches(14, 8, forward=True)
    fig.suptitle(name.value + ' - ' + month.value + ' - '+ algo.value + ' - ' + threshold.value)
    plt.imshow(img)
    plt.show(img)
</code></pre>

<p><img src="img/widget_output.jpg" alt="Widget Output" title="Widget Output" /></p>

<p>If the user desires, they can use the speed variable to change the speed at which the species distributions are animated (or in other words, how quickly they move across the map). This is all controlled by basic GUI objects: one textbox, two dropdowns, and two sliders. Of course, the way these variables are used will differ between projects (not all code is provided here).</p>

<p><img src="img/50.gif" alt="Widget Animation Speed" title="Widget Animation" /></p>

<h2 id="widget-gotchas">Widget gotchas</h2>

<p>In my experience, Jupyter widgets don&rsquo;t play nicely with Github and nbviewer when it comes to simply viewing the GUI objects. It isn&rsquo;t rendered properly. Here is an example of how the above widgets look in Github:</p>

<p><img src="img/broken.jpg" alt="Broken" title="Incorrect Widget Rendering" /></p>

<p>Maybe this will be fixed in the future. In the meantime, Github or nbviewer presentations will need to be replaced with live demosâ€”<em>the horror</em>.</p>

<h3 id="the-other-great-contributors-responsible-for-the-example-code">The other great contributors responsible for the example code</h3>

<ol>
<li><a href="https://github.com/agarwalmegha6">Megha Agarwal</a></li>
<li><a href="https://github.com/trillsauceda">Isaiah Sauceda</a></li>
</ol>

                <br>
                <p><a href="https://ckhoward.github.io/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
        </div>
    </div>
</section>


  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>



</body>
</html>

